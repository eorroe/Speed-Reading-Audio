<!DOCTYPE html>
<html>
<head>
	<title>Speed Reading</title>
</head>
<body onload="document.body.style.zoom = '200%'">
<input type="radio" id="audio2" name="audio" value="Ding.wav">DING</input> <br>
<input type="radio" id="audio3" name="audio" value="InformationBar.wav">INFORMATION BAR</input> <br>
<input type="radio" id="audio4" name="audio" value="Pop-upBlocked.wav">POP-UP BLOCKED</input> <br>
<input type="radio" id="audio5" name="audio" value="Recycle.wav">RECYCLE</input> <br>
<input type="radio" id="audio6" name="audio" value="Restore.wav">RESTORE</input> <br>
<input type="radio" id="audio7" name="audio" value="speechMisrecognition.wav">SPEECH MISRECOGNITION</input> <br>

<button id="oneSec">One Second</button>
<button id="hSec">Half a Second</button>
<button id="3minTimer">Three Min Timer</button>

<h1>Count: <span id="num">0</span></h1>
<script type="text/javascript">

//OBJECTS
btn1 = document.getElementById('oneSec');
btn2 = document.getElementById('hSec');
btn3 = document.getElementById('3minTimer');
soundOptions = document.getElementsByName('audio');
countholder = document.getElementById('num');

//ERROR MESSAGE IF AN OPTION IS NOT CHECKED
errorMessage = document.createElement('h5');
errorMessage.style.color = 'red';
errorMessage.innerHTML = "YOU MUST CHECK ONE OPTION BEFORE PLAYING THE SOUND";

//FUNCTIONS

function setup(times){
	count = 0;
	oneChecked = false;
	for(i in soundOptions){
		if(soundOptions[i].checked){
			sound = new Audio(soundOptions[i].value);
			oneChecked = true;
			addSoundEndListener(times);
		}
	};

	if(!oneChecked){
		document.body.appendChild(errorMessage);
	} else {
		errorMessage.style.display = 'none';
	}
};

function playSound(interval){
	play = setInterval(function(){
		sound.play();
	}, interval);
};

function stopAndRemove(){
	if(typeof play != "undefined"){
		clearInterval(play);
	}
	if(typeof timeLeft != "undefined"){
		clearInterval(timer)
		timeLeft.remove();
	}
}

//EVENT LISTENERS
btn1.addEventListener('click', function(){
	stopAndRemove();
	setup(120);
	if(typeof sound != "undefined"){
		playSound(1000);
	}
});

btn2.addEventListener('click', function(){
	stopAndRemove();
	setup(360);
	if(typeof sound != "undefined"){
		playSound(500);
	}
})

btn3.addEventListener('click', function(){
	stopAndRemove();
	time = 180;
	timeLeft = document.createElement('h1');
	timeLeft.innerHTML = "Time Left: " + time;
	document.body.appendChild(timeLeft);
	timer = setInterval(function(){
		--time;
		timeLeft.innerHTML = "Time Left: " + time;
		if(time == 0){
			sound = new Audio('StopBell.mp3');
			sound.play();
			clearInterval(timer);
		}
	}, 1000);
})

function addSoundEndListener(times){
	sound.addEventListener('ended', function(){
		count++;
		countholder.innerHTML = count;
		if(count == times){
			clearInterval(play);
		};
	})
}
</script>
</body>
</html>